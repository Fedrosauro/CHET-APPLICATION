import streamlit as st
import backend as be

#per ora proviamo a non mettere questa riga
#@st.experimental_singleton

# funzione da invocare all'inizio per creare connessione al database
supabase=be.init_connection()


#pagina iniziale login (username e password vengono inseriti nel session state)
st.session_state['Username'] = st.text_input("Username")
st.session_state['Password'] = st.text_input("Password")


#funzione da invocare quando si preme il tasto login
#se username e password sono corretti ritorna true (e fate che si passa alla pagina di chat) altrimenti false (e fate che esce messaggio d'errore)
be.login(supabase)

#pagina per fare signin 
st.session_state['Username'] = st.text_input("Username")
st.session_state['Password'] = st.text_input("Password")
st.session_state['Mail']=st.text_input("Mail")

#metodo per aggiungere le nuove credenziali (password,username e mail) al database
#ritorna true se le credenziali sono state inserite correttamente (fate che si passa alla pagina di chat)
#ritorna false se un campo è vuoto o contiene spazi oppure se l'username è già occupato (fate che esce un messaggio d'errore)
be.signin(supabase)
